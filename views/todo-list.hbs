<!DOCTYPE html>
<html>
    <head><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
       body{
           background-color: rgb(171, 137, 202);
       }
       #append{
           background-color: white;
           width: fit-content;
           margin: auto;
           padding: 10px;
            
        max-height:70vh;
        line-height: 1.5;
  box-sizing: border-box;
 
       

       }
       
       #tasks{
           color:blueviolet
       }
       #append div h4{
           display: inline-block;
       }
       #append div input{
           margin-right: 5%;
       }
       #show input{
           background: transparent;
  border: none;
  border-bottom: 1px solid #000000;
       }
       #show{
           display: none;
           margin-top:5px;
           
       }
       .container {
  background-color: #fdfdfd;
  height: 100%;
  width: 100%;
  border-radius: 6px;
  box-shadow: 0 4px 28px rgba(126, 160, 168, 0.76);
  border: 1px solid #d6dee1;
  padding: 1rem;
  overflow: scroll;
}
.container::-webkit-scrollbar {
  width: 20px;
}
.container::-webkit-scrollbar-thumb:hover {
  background-color: #43646b;
}
.container::-webkit-scrollbar-track {
  background-color: transparent;
}
.container::-webkit-scrollbar-thumb {

  background-color: #d6dee1;
  border-radius: 20px;
  border: 6px solid transparent;
  background-clip: content-box;
}

img{
    width:40px;
    height: 40px;
    position: relative;
    top: -10px;
    border-radius: 2px;
    
}

footer div{
             border: 2px solid black;
           }

           body{
               min-height: 100vh;
               display: flex;
               flex-direction: column;
           }
           #error{

width: fit-content;
         margin: auto;
         margin-top: 5%;
         flex-grow: 1;
           }

           #welcome{
               color:whitesmoke;
               background-color:rgba(0, 0, 0, 0.8);
               width: 20vw;
               height: 150px;
               position:fixed;
            border-radius: 20px;
             
            left: 80%;
            
           }
           #wel{
              
           }
           #name{
               
           }
           #prog{
               height: 15px;
               width:100%;
               background-color: white;
               border-radius: 20px;
           }
           #progress{
               height: 15px;
               width:100%;
               background-color: white;
               border-radius: 20px;
           }
    </style>
    
    
    </head>

    <body>
        {{>header}}
        <br>
        
        <div id="welcome" >
              <div id="wel">
                  <h5>welcome</h5>
                  <div id="prog" style="color: white;font-size:1px">Hi</div>

              </div>
              <br>
              <div id="name">
                  <h5 id="mera">Name</h5>
                  <div id="progress" style="color: white;font-size:1px"> hI</div>

              </div>
        </div>

        <h1 id="nname" style="display: none;">{{n}}</h1>
        <h1 id="getdata" style="display: none;">{{data}}</h1>
        <h1 id="gethour" style="display: none;">{{hour}}</h1>
        <h1 id="getmin" style="display: none;">{{min}}</h1>
         <h1 id="getid" style="display: none;">{{id}}</h1>
         <div id="append" class="container custom-scrollbar" id="error">
        <img src="https://cdn3.iconfinder.com/data/icons/medical-2-16/64/181-512.png">
        <h1 id="tasks" style="display: inline-block;"></h1>
        <p id="msg" style="color:Red" >{{msg}}</p>
         <form action="/delete" method="post">
         <div id="app">

         </div>
         </form>
         
        <form action="/todo-list" method="post" id="show">
        <label for="hour">Hour</label>
        <input type="number" min="0" max="23" placeholder="23" name="hour" required id="hour"> :
        <label for="min">Minutes</label>
        <input type="number" min="0" max="59" placeholder="00" name="min" required id="min"> 
        <br>
        <br>
        <label for="work">TASK</label>
            <input type="text" name="todo" required placeholder="Enter your Task " id="work">
            <button type="submit" class="btn btn-md " style="border-radius: 50%;background-color:blueviolet;font-weight:bold" id="again"> + </button>
        </form>
        <button type="button" id="hide" class="btn btn-md" style="background-color:blueviolet;font-weight:bold">Add your Task</button>
         </div>
        <h1>{{value}}</h1>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>
            $(document).ready(function(){
                $("#hide").click(function(){
                    $("#show").show();
                    $("#hide").hide();
                    $("#msg").hide()
                })
                 $("#again").submit(function(){
                    $("#show").hide();
                    $("#hide").show();
                })
            })
            
        </script>
        <script>
              var $div=document.getElementById("app")
              var $data=document.getElementById("getdata").innerHTML
              var $hour=document.getElementById("gethour").innerHTML
               var $min=document.getElementById("getmin").innerHTML
               var $id=document.getElementById("getid").innerHTML
               var $task=document.getElementById("tasks")
              var arr=$data.split(",")
              var hour=$hour.split(",")
              var min=$min.split(",")
            var id=$id.split(",")
           
              
              var months=[
            "Jan",
            "Feb",
            "Mar",
            "Apr",
            "May",
            "June",
            "July",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
            "Dec"
        ];
              var now=new Date()
              var date=now.getDate();
              var month=months[now.getMonth()];
              $task.innerHTML="Today ("+date+" "+month+")"
              var Am=[];
              var j=0;
              console.log(hour,min)
              hour.forEach(function(hr){
                  if(hr>11){
                      Am.push("pm")
                  }
                  else{
                      Am.push("am")
                  }
                  if(hr>12){
                      hour[j]=hr-12;
                  }
                  if(min[j]<10){
                      min[j]="0"+min[j];
                  }
                  j++;
              })
              var i=0;
            
              if(hour[0]!=''){
                   
              
              arr.forEach(function(dat){
     
                 $div.innerHTML=$div.innerHTML+"<div>"+"<span>"+hour[i]+":"+min[i]+" "+Am[i]+"</span>"+"<br>"+"<input type='checkbox' onchange='this.form.submit()' name='checkbox' value='<%=dat %>' class='hi'>"+"</input>"+"<h4 name='del'>"+dat+"</h4>"+"</div>"
                  document.getElementsByClassName("hi")[i].value=id[i]
                 i=i+1;
                

              })
              }
        </script>
        <script>
            var name=document.getElementById("nname").innerHTML;

            var me=name.split(",");

            if(me.length>1){
               document.getElementById("mera").innerHTML=me[0]+" "+me[1];
             var bar=document.getElementById("progress")
            var cl=setInterval(()=>{
                
                var a=bar.offsetWidth;
                if(a==0){
                    clearInterval(cl)
                    document.getElementById("welcome").style.display="none"
                }
                bar.style.width=a-1+"px"
                  console.log(bar.offsetWidth)
          },20)
     }
     else{
         document.getElementById("welcome").style.display="none"
     }
           
        </script>


            {{>footer}}
    </body>
</html>